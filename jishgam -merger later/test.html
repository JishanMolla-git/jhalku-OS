<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="window.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <style></style>
    <script>
      $(document).ready(function () {
        // Flag to track if the window is created
        var windowCreated = false;

        // Reference to the window element
        var windowElement = null;

        $(".draggable").draggable({
          handle: ".menu",
          start: function (event, ui) {
            // When dragging starts, set the z-index of the current element
            $(this).css("z-index", 9999);
            // Reset z-index for other draggable elements
            $(".draggable").not(this).css("z-index", "");
          },
        });

        $(".draggable").on("click", function () {
          $(this).css("z-index", 9999);

          $(".draggable").not(this).css("z-index", "");
        });

        $(".app").on("click", function () {
          if (!windowCreated) {
            // Create a new window element
            windowElement = $("<div>")
              .addClass("window draggable win-wrapper")
              .html(
                '<div class="menu" autofocus><button class="close button"></button><button class="min button"></button><button class="max button"></button></div>'
              );

            $("body").append(windowElement);

            windowElement.draggable({ handle: ".menu" });

            windowElement.find(".close").on("click", function () {
              windowElement.hide();
            });

            windowCreated = true;
          } else {
            windowElement.toggle();
          }
        });
      });
    </script>
  </head>
  <body>
    <button class="app">Show App</button>
  </body>
</html>
